# AI Repository Summary

## Project Overview

**Project Name**: Advanced-Memory2 MCP Server  
**Repository**: advanced-memory-foxtrot59  
**Status**: ðŸš§ Project Structure Established - Implementation Phase  
**Created**: October 2025  
**Tech Stack**: .NET 9.0, Neo4j, Qdrant, Redis, .NET Aspire

## What This Project Does

Advanced-Memory2 is a unified knowledge graph and semantic memory system that provides AI agents with:

1. **Long-term Memory**: Vector-based storage using Qdrant for semantic search across past interactions
2. **Knowledge Graphs**: Neo4j-powered entity-relationship graphs with GraphRAG capabilities
3. **Fact Grounding**: LLM-powered verification to ensure information accuracy
4. **MCP Integration**: Model Context Protocol compliant server for seamless AI agent integration
5. **Observability**: Built-in structured logging, distributed tracing, and metrics

The system enables AI agents to maintain context across sessions, learn from interactions, and ground their responses in verified knowledge.

## Architecture

### Microservices Design

The system is composed of 5 independent microservices orchestrated via .NET Aspire:

1. **MCP Server** (`src/AdvancedMemory.McpServer/`)
   - API Gateway implementing MCP protocol
   - Entry point for all AI agent requests
   - Routes to appropriate backend services

2. **GraphRAG Service** (`src/AdvancedMemory.GraphRAGService/`)
   - Knowledge graph operations with Neo4j
   - Entity and relationship management
   - Community detection and graph algorithms

3. **Memory Service** (`src/AdvancedMemory.MemoryService/`)
   - Vector memory with Qdrant
   - Semantic search over embeddings
   - Memory consolidation and deduplication

4. **Grounding Service** (`src/AdvancedMemory.GroundingService/`)
   - Fact-checking and verification
   - LLM-powered accuracy validation
   - Source attribution

5. **Orchestration Service** (`src/AdvancedMemory.OrchestrationService/`)
   - Multi-service workflow coordination
   - Complex query orchestration
   - Distributed transaction management

### Supporting Projects

- **Core** (`src/AdvancedMemory.Core/`): Domain models, interfaces, value objects
- **Infrastructure** (`src/AdvancedMemory.Infrastructure/`): Data access, external service clients
- **Shared** (`src/AdvancedMemory.Shared/`): Utilities, extensions, helpers
- **ServiceDefaults** (`src/AdvancedMemory.ServiceDefaults/`): Aspire service configuration
- **AppHost** (`src/AdvancedMemory.AppHost/`): Aspire orchestration host
- **Dashboard** (`src/AdvancedMemory.Dashboard/`): Blazor WebAssembly admin UI

## Key Technologies

- **.NET 9.0** with C# 12 and .NET Aspire for microservices orchestration
- **Neo4j 5.15** for graph database (entities, relationships, communities)
- **Qdrant v1.7.0** for vector database (embeddings, semantic search)
- **Redis 7.2** for distributed caching and session state
- **OpenAI GPT-4 Turbo** for language model reasoning
- **text-embedding-3-large** for 3072-dimensional embeddings
- **Serilog + Seq** for structured logging
- **OpenTelemetry + Jaeger** for distributed tracing
- **xUnit + Moq + FluentAssertions** for testing
- **Docker + Docker Compose** for containerization
- **Terraform** for infrastructure as code

## Project Structure

```
advanced-memory-foxtrot59/
â”œâ”€â”€ src/                      # Source code (11 projects)
â”‚   â”œâ”€â”€ AdvancedMemory.Core/
â”‚   â”œâ”€â”€ AdvancedMemory.Infrastructure/
â”‚   â”œâ”€â”€ AdvancedMemory.Shared/
â”‚   â”œâ”€â”€ AdvancedMemory.ServiceDefaults/
â”‚   â”œâ”€â”€ AdvancedMemory.McpServer/
â”‚   â”œâ”€â”€ AdvancedMemory.GraphRAGService/
â”‚   â”œâ”€â”€ AdvancedMemory.MemoryService/
â”‚   â”œâ”€â”€ AdvancedMemory.GroundingService/
â”‚   â”œâ”€â”€ AdvancedMemory.OrchestrationService/
â”‚   â”œâ”€â”€ AdvancedMemory.AppHost/
â”‚   â””â”€â”€ AdvancedMemory.Dashboard/
â”œâ”€â”€ tests/                    # Test projects (6 projects)
â”‚   â”œâ”€â”€ AdvancedMemory.Core.Tests/
â”‚   â”œâ”€â”€ AdvancedMemory.Infrastructure.Tests/
â”‚   â”œâ”€â”€ AdvancedMemory.GraphRAGService.Tests/
â”‚   â”œâ”€â”€ AdvancedMemory.MemoryService.Tests/
â”‚   â”œâ”€â”€ AdvancedMemory.McpServer.Tests/
â”‚   â””â”€â”€ AdvancedMemory.E2E.Tests/
â”œâ”€â”€ scripts/                  # Build, test, deploy scripts
â”‚   â”œâ”€â”€ build/               # build-all.sh, clean.sh
â”‚   â”œâ”€â”€ test/                # run-tests.sh
â”‚   â””â”€â”€ deploy/              # docker-up.sh, docker-down.sh
â”œâ”€â”€ docs/                     # Documentation
â”‚   â””â”€â”€ adr/                 # Architecture Decision Records
â”œâ”€â”€ .github/workflows/        # CI/CD pipelines
â”œâ”€â”€ docker-compose.yml        # Local dev environment
â”œâ”€â”€ AdvancedMemory.sln        # Solution file (17 projects)
â”œâ”€â”€ Directory.Build.props     # Shared MSBuild properties
â”œâ”€â”€ Directory.Packages.props  # Central Package Management
â””â”€â”€ README.md                 # Main documentation
```

## Getting Started

### Prerequisites

- .NET 9.0 SDK (version 9.0.102+)
- Docker Desktop
- OpenAI API Key

### Quick Start

```bash
# 1. Clone and configure
git clone <repo-url>
cd advanced-memory-foxtrot59
cp .env.example .env
# Edit .env and add OPENAI_API_KEY

# 2. Start infrastructure (Neo4j, Qdrant, Redis, Seq, Jaeger)
./scripts/deploy/docker-up.sh

# 3. Build solution
./scripts/build/build-all.sh

# 4. Run tests
./scripts/test/run-tests.sh

# 5. Start services
cd src/AdvancedMemory.AppHost
dotnet run
```

Services available at:
- MCP Server: http://localhost:8080
- Dashboard: http://localhost:8090
- Aspire Dashboard: http://localhost:18888

## Development Workflow

1. **Build**: `./scripts/build/build-all.sh` or `dotnet build`
2. **Test**: `./scripts/test/run-tests.sh` or `dotnet test`
3. **Clean**: `./scripts/build/clean.sh`
4. **Docker Local**: `./scripts/deploy/docker-up.sh`

## CI/CD Pipelines

- **build-test.yml**: Build, test, lint, security scan on every push/PR
- **docker-build-push.yml**: Build and push Docker images on main branch and tags

## Configuration

Services configured via `appsettings.json` with these key sections:

- **ConnectionStrings**: Database connections (Neo4j, Qdrant, Redis)
- **OpenAI**: API key and model settings
- **OpenTelemetry**: Tracing configuration (Jaeger)
- **Serilog**: Structured logging (Seq)
- **ServiceUrls**: Inter-service communication URLs

Environment-specific overrides: `appsettings.Development.json`, `appsettings.Production.json`

## Testing Strategy

- **Unit Tests**: Test individual components (Core, Infrastructure)
- **Integration Tests**: Test with Testcontainers (real databases)
- **E2E Tests**: Full workflow tests across all services
- **Target**: 80%+ code coverage

## Common Tasks

### Build specific project
```bash
dotnet build src/AdvancedMemory.McpServer/AdvancedMemory.McpServer.csproj
```

### Run specific test
```bash
dotnet test --filter "FullyQualifiedName~TestName"
```

### View logs (Docker)
```bash
docker-compose logs -f mcp-server
```

### Access Infrastructure
- Neo4j Browser: http://localhost:7474 (neo4j/advancedmemory123)
- Seq Logs: http://localhost:5342
- Jaeger: http://localhost:16686

## Current Status

âœ… **Completed**:
- Project structure established (17 projects)
- Solution file with all dependencies configured
- Core domain models (Memory, Entity, Relationship, Document, UserContext)
- Service interfaces (9 interfaces defined)
- Dockerfiles for all 7 services
- docker-compose.yml with full infrastructure stack
- Configuration templates (appsettings.json)
- Build/test/deploy scripts
- CI/CD workflows (build-test.yml, docker-build-push.yml)
- Documentation structure (README, architecture, tech stack)
- Architecture Decision Records (ADRs) for key decisions

ðŸš§ **In Progress**:
- Core domain model implementation
- Infrastructure layer implementation
- Service implementation (MCP, GraphRAG, Memory, Grounding, Orchestration)
- API endpoint development
- Test implementation

ðŸ“‹ **Upcoming**:
- Dashboard UI implementation
- Kubernetes deployment manifests
- Performance testing
- End-to-end testing
- API documentation (Swagger/OpenAPI)

## Key Files

- `AdvancedMemory.sln`: Main solution file
- `README.md`: Main project documentation
- `docker-compose.yml`: Local development environment
- `Directory.Build.props`: Shared MSBuild properties
- `Directory.Packages.props`: Central package management
- `.github/workflows/build-test.yml`: CI/CD build pipeline
- `docs/application-plan.md`: Complete implementation plan
- `docs/architecture.md`: System architecture
- `docs/tech-stack.md`: Technology decisions

## Dependencies

### NuGet Packages (via Central Package Management)
- Microsoft.AspNetCore.OpenApi 9.0.0
- Microsoft.Extensions.ServiceDiscovery.Yarp 9.0.0
- Aspire.Hosting.AppHost 9.1.0
- Neo4j.Driver 5.15.0
- Qdrant.Client 1.7.0
- StackExchange.Redis 2.8.16
- Serilog.AspNetCore 8.0.3
- OpenTelemetry.Exporter.OpenTelemetryProtocol 1.10.0
- xunit 2.9.3
- Moq 4.20.72
- FluentAssertions 7.0.0
- Testcontainers 3.10.0

### External Services
- OpenAI API (GPT-4 Turbo, text-embedding-3-large)
- Neo4j 5.15 (graph database)
- Qdrant v1.7.0 (vector database)
- Redis 7.2 (cache)
- Seq (logs)
- Jaeger (tracing)

## Contributing

See [CONTRIBUTING.md](CONTRIBUTING.md) for contribution guidelines.

## Documentation

- [README.md](README.md) - Getting started and comprehensive guide
- [docs/application-plan.md](docs/application-plan.md) - Implementation plan
- [docs/architecture.md](docs/architecture.md) - System architecture
- [docs/tech-stack.md](docs/tech-stack.md) - Technology stack
- [docs/project-structure.md](docs/project-structure.md) - Project structure
- [docs/adr/](docs/adr/) - Architecture Decision Records

## License

MIT License - see [LICENSE.md](LICENSE.md)

---

**Last Updated**: October 2025  
**Maintainers**: Development Team  
**Status**: Active Development
